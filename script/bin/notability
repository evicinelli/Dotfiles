#! /bin/bash

(
#cd $NOTES
ext="txt"
base_dir="$1"
shift
cd $base_dir
note=`find -type f -not -wholename "*Archivio*" | fzf --height=100% -1 --header="$base_dir" --preview='head -$LINES {}' --print-query --query="$*"`
if [[ $? -eq 0 ]]; then
    # edit note
    $EDITOR "`tail -n1 <<< "$note"`"
elif [[ $? -eq 1 ]]; then
    if [[ $note != "" ]]; then
        # add new note
        touch "$note.$ext"
        $EDITOR "$note.$ext"
    else
        exit 0
    fi
fi
)
