#! /bin/bash
red="#AB4642"
yellow="#F7CA88"
green="#A1B56C"

tdf="/home/vic/ownCloud/Dropbox/todo.txt"

case ${BLOCK_BUTTON} in
    3) urxvt -e bash -c "gview $tdf && disown";;
    *) ;;
esac

tdn=$(cat "$tdf" | grep -v "^x" | grep "due:`date +%F`" | wc -l)
tdun=$(cat "$tdf" | grep -v "^x" | grep "due:`date +%F`" | grep "^(" | wc -l)
echo $tdn, $tdun! # Real text
echo # Short text

# Color
if [[ $tdun -gt 0 ]]; then
    echo "$red"
    exit 0
elif [[ $tdn -gt 0 ]]; then
    echo "$yellow"
else
    echo "$green"
fi
